<!DOCTYPE html>
<html lang="vi">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<title>Chúc mừng sinh nhật</title>
	<style>
		html, body {
			height: 100%;
			margin: 0;
			padding: 0;
			box-sizing: border-box;
		}   
		body {
			background: #000;
			color: #fff;
			width: 100vw;
			height: 100vh;
			overflow: hidden;
			font-family: 'Courier New', Courier, monospace;
		}
		#matrix {
			position: absolute;
			top: 0; left: 0;
			width: 100vw;
			height: 100vh;
			z-index: 2;
		}
	</style>
</head>
<body>
	<div id="birthday-banner" style="position:fixed;top:5vw;left:50%;transform:translateX(-50%);z-index:20;display:flex;align-items:center;justify-content:center;gap:2vw;">
	<div style="background:rgba(0,0,0,0.92);border-radius:8vw;padding:4vw 4vw;display:flex;align-items:center;box-shadow:0 0 28px #fffbe6;width:80vw;max-width:90vw;">
			<img src="Gaubong.gif" alt="cake left" style="height:30vw;max-height:60px;object-fit:contain;">
			<span style="font-size:3.9vw;color:#ff65a3;font-family:'Pacifico',cursive;text-shadow:0 0 12px #fffbe6,0 0 4px #b721ff;font-weight:bold;letter-spacing:3px;margin:0 1vw;">Happy Birthday to Ín Nhiii</span>
			<img src="Birthday_Right.gif" alt="cake right" style="height:20vw;max-height:60px;object-fit:contain;">
		</div>
	</div>
	<div id="canvas-container" style="position:relative;width:100vw;height:100vh;overflow:hidden;perspective:1200px;">
		<canvas id="star-bg" style="position:absolute;top:0;left:0;width:100vw;height:100vh;z-index:1;"></canvas>
		<canvas id="matrix" style="position:absolute;top:0;left:0;width:100vw;height:100vh;z-index:2;"></canvas>
	</div>
	<button id="next-btn" style="position: absolute; left: 50%; top: 80%; transform: translate(-50%, -50%); z-index: 10; background: #e573b7; color: #fff; border: none; border-radius: 8px; padding: 16px 32px; font-size: 1.2em; font-family: inherit; cursor: pointer; box-shadow: 0 0 12px #e573b7;">Đợi tầm 5s rồi mới ấn à !</button>
	<div id="center-image-container" style="position:fixed;left:50%;top:50%;transform:translate(-50%,-50%);z-index:9;pointer-events:none;display:flex;flex-direction:column;justify-content:center;align-items:center;min-width:0;min-height:0;">
		<img id="top-decoration" src="HatBirthday.png" alt="cake or hat" style="width:0;max-width:80px;opacity:1;margin-bottom:1vw;transition:width 2.5s cubic-bezier(.22,1,.36,1),opacity 2.5s;object-fit:contain;">
		<img id="center-image" src="HappyBirthDay.png" alt="center" style="width:70vw;opacity:0;border-radius:20px;box-shadow:0 0 40px #fff,0 0 80px #b721ff;transition:width 2.5s cubic-bezier(.22,1,.36,1),opacity 2.5s;max-width:100vw;max-height:40vh;object-fit:contain;">
	</div>
	<script>
	// Matrix Effect: chia màn hình thành các vùng dọc, mỗi vùng rơi một câu chúc ngẫu nhiên, không đè lên nhau
	// Star background effect with rotation
	const starCanvas = document.getElementById('star-bg');
	const starCtx = starCanvas.getContext('2d');
	let W = window.innerWidth;
	let H = window.innerHeight;
	starCanvas.width = W;
	starCanvas.height = H;
	const STAR_COUNT = Math.floor(W * H / 900);
	let stars = [];
	let rotationY = 0, rotationX = 0, dragging = false, lastX = 0, lastY = 0;
	function createStars() {
		stars = [];
		for(let i=0; i<STAR_COUNT; i++) {
			let big = Math.random() > 0.92;
			stars.push({
				x: Math.random()*W,
				y: Math.random()*H,
				r: big ? Math.random()*2.5+1.5 : Math.random()*1.2+0.5,
				alpha: big ? Math.random()*0.5+0.7 : Math.random()*0.7+0.3,
				twinkle: big ? Math.random()*0.08+0.03 : Math.random()*0.05+0.01,
				color: big ? (Math.random()>0.5 ? '#fffbe6' : '#e0e7ff') : '#fff',
				baseX: 0,
				baseY: 0
			});
		}
		for(let s of stars) {
			s.baseX = s.x;
			s.baseY = s.y;
		}
	}
	createStars();
	function drawStars() {
		starCtx.clearRect(0,0,W,H);
		let radY = rotationY * Math.PI/180;
		let radX = rotationX * Math.PI/180;
		for(let s of stars) {
			// Hiệu ứng xoay: dịch chuyển vị trí sao theo góc xoay
			let x = s.baseX - W/2;
			let y = s.baseY - H/2;
			let newX = x * Math.cos(radY) - y * Math.sin(radY);
			let newY = x * Math.sin(radX) + y * Math.cos(radX);
			let drawX = newX + W/2;
			let drawY = newY + H/2;
			starCtx.save();
			starCtx.globalAlpha = s.alpha;
			starCtx.beginPath();
			starCtx.arc(drawX, drawY, s.r, 0, 2*Math.PI);
			starCtx.fillStyle = s.color;
			starCtx.shadowColor = s.color;
			starCtx.shadowBlur = s.r > 2 ? 18 : 10;
			starCtx.fill();
			starCtx.restore();
			// Twinkle
			s.alpha += (Math.random()-0.5)*s.twinkle;
			s.alpha = Math.max(0.15, Math.min(1, s.alpha));
		}
	}
	setInterval(drawStars, 40);

	// Xoay canvas khi kéo chuột hoặc chạm
	const canvasContainer = document.getElementById('canvas-container');
// Không còn hiệu ứng xoay, background và các câu chúc rơi tĩnh

// Hiệu ứng hình ảnh xuất hiện từ giữa màn hình, phóng to dần
window.addEventListener('DOMContentLoaded', function() {
	const img = document.getElementById('center-image');
	const deco = document.getElementById('top-decoration');
	img.style.width = '0';
	img.style.opacity = '0';
	deco.style.width = '0';
	setTimeout(() => {
		img.style.width = '4vw';
		img.style.opacity = '1';
		deco.style.width = '4vw';
		setTimeout(() => {
			img.style.width = '28vw';
			deco.style.width = '12vw';
		}, 2200); // phóng to dần sau khi đã hiện ra nhỏ
	}, 4000); // xuất hiện sau 4 giây
});

	const matrixCanvas = document.getElementById('matrix');
	const ctx = matrixCanvas.getContext('2d');
	matrixCanvas.width = W;
	matrixCanvas.height = H;
	let fontSize = Math.max(24, Math.floor(W/35));
	let wishes = [
		'Happy Birthday!',
		'Wishing you joy!',
		'May all your dreams come true!',
		'Have a magical birthday!',
		'Lots of love on your day!',
		'Smile and celebrate!',
		'Wishing you happiness!',
		'Hope your day is sweet!',
		'Enjoy your special day!',
		'You are amazing!',
		'Stay cute and happy!',
		'Best wishes to you!',
		'Cake and candles for you!',
		'Make a wish!',
		'You deserve the best!',
		'Shine bright today!',
		'Cheers to you!',
		'Have fun and be happy!'
	];
	let areaCount = Math.floor(W / (fontSize * 1.1)); // tăng số vùng, dày đặc hơn
	let areaWidth = W / areaCount;
	let wishRain = [];
	function randomDelay() {
		return Math.floor(Math.random() * 15); // delay ngắn hơn, rơi liên tục hơn
	}
	// Galaxy gradient colors from pink to purple
	let galaxyColors = [
		'#ff7eb9', // hồng sáng
		'#ff65a3',
		'#f67280',
		'#c06c84',
		'#6c5b7b', // tím nhạt
		'#7f53ac', // tím
		'#5f2c82', // tím đậm
		'#a4508b', // tím hồng
		'#e17dc2', // tím pastel
		'#b721ff'  // tím galaxy
	];
	function randomColor() {
		return galaxyColors[Math.floor(Math.random()*galaxyColors.length)];
	}
	function createRain() {
		wishRain = [];
		for(let i=0; i<areaCount; i++) {
			let wish = wishes[Math.floor(Math.random()*wishes.length)];
			let x = Math.floor(i * areaWidth + (areaWidth-fontSize)/2);
			wishRain.push({
				text: wish,
				x: x,
				y: -Math.floor(Math.random()*H),
				delay: randomDelay(),
				speed: 4 + Math.random()*2.5,
				color: randomColor()
			});
		}
	}
	createRain();
	function drawMatrix() {
		ctx.clearRect(0, 0, W, H);
		ctx.font = fontSize + "px 'Fredoka One', 'Baloo', 'Pacifico', cursive";
		for(let i=0; i<wishRain.length; i++) {
			let wish = wishRain[i];
			if(wish.delay > 0) {
				wish.delay--;
				continue;
			}
			let y = wish.y;
			if(y > 0 && y < H) {
				ctx.fillStyle = wish.color;
				ctx.shadowColor = wish.color;
				ctx.shadowBlur = 8;
				ctx.fillText(wish.text, wish.x, y);
			}
			wish.y += wish.speed;
			if(wish.y > H + fontSize) {
				// reset vị trí và câu chúc mới, giữ nguyên vùng
				wish.text = wishes[Math.floor(Math.random()*wishes.length)];
				wish.y = -fontSize;
				wish.delay = randomDelay();
				wish.speed = 3.5 + Math.random()*2.5;
				wish.color = randomColor();
			}
		}
	}
	let matrixInterval = setInterval(drawMatrix, 80);
	window.addEventListener('resize', () => {
		W = window.innerWidth;
		H = window.innerHeight;
		starCanvas.width = W;
		starCanvas.height = H;
		createStars();
		matrixCanvas.width = W;
		matrixCanvas.height = H;
		fontSize = Math.max(24, Math.floor(W/35));
		areaCount = Math.floor(W / (fontSize * 1.1));
		areaWidth = W / areaCount;
		createRain();
	});

	// Chuyển sang phần 2 khi ấn nút

	document.getElementById('next-btn').onclick = function() {
		clearInterval(matrixInterval);
		document.getElementById('matrix').style.display = 'none';
		document.getElementById('next-btn').style.display = 'none';
		// Ẩn ảnh trung tâm
		const imgContainer = document.getElementById('center-image-container');
		if (imgContainer) {
			imgContainer.style.display = 'none';
		}
        }
		document.addEventListener('DOMContentLoaded', function() {
  var btn = document.getElementById('next-btn');
  if(btn) {
    btn.onclick = function() {
      window.location.href = 'https://beta-crypto.github.io/Birthday_Page2/Birthday_Page2.html';
    };
  }
});
	</script>
</body>
</html>
